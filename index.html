<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biradar ACCA Accounting System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --primary: #1a4f72;
            --primary-light: #2c8c99;
            --secondary: #0d3a5d;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --light: #f8f9fa;
            --dark: #343a40;
            --border: #dee2e6;
            --text: #212529;
            --text-light: #6c757d;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --card-radius: 12px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa, #e4edf5);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 15px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 0;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--primary);
        }
        
        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .logo-text p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .accounting-equation {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px;
            border-radius: 8px;
            font-size: 1.3rem;
            font-weight: 600;
            max-width: 100%;
            margin: 0 auto;
        }
        
        .accounting-equation span {
            color: #ffd43b;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        @media (min-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: var(--primary);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .card-header h2 {
            color: var(--primary);
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-header h2 i {
            color: var(--primary-light);
        }
        
        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(26, 79, 114, 0.25);
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(to right, var(--success), #218838);
            color: white;
        }
        
        .btn-info {
            background: linear-gradient(to right, #17a2b8, #138496);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(to right, var(--warning), #e0a800);
            color: var(--dark);
        }
        
        .btn-danger {
            background: linear-gradient(to right, var(--danger), #c82333);
            color: white;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--primary);
            font-size: 0.95rem;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            border-color: var(--primary-light);
            outline: none;
            box-shadow: 0 0 0 3px rgba(44, 140, 153, 0.2);
        }
        
        .tab-container {
            background: white;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .tabs {
            display: flex;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            overflow-x: auto;
        }
        
        .tab {
            padding: 14px 20px;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.95rem;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab.active {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            position: relative;
        }
        
        .tab.active:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: white;
        }
        
        .tab-content {
            display: none;
            padding: 25px;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            min-width: 600px;
        }
        
        th, td {
            padding: 12px 10px;
            text-align: left;
            border-bottom: 1px solid var(--border);
            font-size: 0.95rem;
        }
        
        th {
            background-color: #f1f5f9;
            color: var(--primary);
            font-weight: 700;
        }
        
        tr:hover {
            background-color: #f8fafc;
        }
        
        .debit-amount {
            color: #2c8c99;
            font-weight: 600;
        }
        
        .credit-amount {
            color: #e74c3c;
            font-weight: 600;
        }
        
        .trial-balance {
            background-color: #f0f7ff;
            border-left: 4px solid var(--primary);
            padding: 16px;
            border-radius: 8px;
            margin-top: 16px;
        }
        
        .trial-balance h3 {
            color: var(--primary);
            margin-bottom: 12px;
            font-size: 1.2rem;
        }
        
        .trial-balance .total {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            background-color: white;
            border-radius: 6px;
            margin-top: 12px;
            font-weight: 700;
            font-size: 1rem;
        }
        
        .balanced {
            color: var(--success);
            margin-top: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        
        .not-balanced {
            color: var(--danger);
            margin-top: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 30px 15px;
            color: var(--text-light);
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #e2e8f0;
        }
        
        .empty-state h3 {
            font-size: 1.3rem;
            margin-bottom: 8px;
            color: var(--primary);
        }
        
        .empty-state p {
            font-size: 1rem;
        }
        
        .notification {
            position: fixed;
            top: 15px;
            right: 15px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            box-shadow: var(--shadow);
            z-index: 1000;
            transform: translateX(200%);
            transition: transform 0.4s ease;
            max-width: 300px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
        }
        
        .notification.success {
            background: linear-gradient(to right, var(--success), #218838);
            transform: translateX(0);
        }
        
        .notification.error {
            background: linear-gradient(to right, var(--danger), #c82333);
            transform: translateX(0);
        }
        
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 20px;
        }
        
        .action-buttons .btn {
            flex: 1;
            min-width: 140px;
        }
        
        .table-container {
            overflow-x: auto;
            max-height: 450px;
            margin: 0 -10px;
            padding: 0 10px;
            border-radius: 6px;
        }
        
        .financial-statement {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }
        
        .statement-header {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .statement-header h2 {
            font-size: 1.6rem;
            margin-bottom: 8px;
        }
        
        .statement-section {
            margin-bottom: 16px;
        }
        
        .statement-total {
            font-weight: 700;
            padding-top: 12px;
            border-top: 2px solid var(--border);
            font-size: 1.1rem;
        }
        
        .account-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            font-size: 1rem;
        }
        
        .account-name {
            flex: 2;
        }
        
        .account-value {
            flex: 1;
            text-align: right;
            font-weight: 600;
        }
        
        footer {
            background: linear-gradient(to right, var(--secondary), var(--primary));
            color: white;
            padding: 25px 0;
            border-radius: var(--card-radius);
            text-align: center;
            margin-top: 25px;
        }
        
        .footer-content {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .footer-content p {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .copyright {
            margin-top: 12px;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
        
        /* Financial Statements Grid */
        .financial-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
        }
        
        @media (min-width: 992px) {
            .financial-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .financial-section {
            background: white;
            border-radius: var(--card-radius);
            padding: 16px;
            box-shadow: var(--shadow);
        }
        
        .financial-section h3 {
            color: var(--primary);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }
        
        .account-item {
            display: flex;
            justify-content: space-between;
            padding: 7px 0;
            border-bottom: 1px dashed #eee;
            font-size: 0.95rem;
        }
        
        .account-item:last-child {
            border-bottom: none;
        }
        
        .account-item.total {
            font-weight: bold;
            border-top: 2px solid var(--border);
            padding-top: 8px;
            margin-top: 4px;
        }
        
        .account-item.subtotal {
            font-weight: 600;
            border-top: 1px solid var(--border);
            padding-top: 8px;
            margin-top: 4px;
        }
        
        .value-positive {
            color: #28a745;
        }
        
        .value-negative {
            color: #dc3545;
        }
        
        .account-header {
            background-color: var(--primary);
            color: white;
            padding: 10px 12px;
            border-radius: 5px;
            margin-bottom: 12px;
            font-size: 0.95rem;
        }
        
        .financial-statement-title {
            text-align: center;
            margin: 0 0 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .financial-period {
            text-align: center;
            margin-bottom: 20px;
            font-style: italic;
        }
        
        .statement-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
        }
        
        .statement-table th {
            background-color: #e9f2fa;
            text-align: left;
            padding: 10px 12px;
            font-size: 0.95rem;
        }
        
        .statement-table td {
            padding: 8px 12px;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }
        
        .statement-table .total-row {
            font-weight: bold;
            background-color: #f8fafc;
        }
        
        .statement-table .indent {
            padding-left: 25px;
        }
        
        .cash-flow-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }
        
        .cash-flow-section {
            background: white;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 16px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        
        .cash-flow-section h4 {
            color: var(--primary);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
            font-size: 1.1rem;
        }
        
        .cash-flow-item {
            display: flex;
            justify-content: space-between;
            padding: 7px 0;
            font-size: 0.95rem;
        }
        
        .cash-flow-total {
            font-weight: bold;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid var(--border);
            font-size: 1rem;
        }
        
        /* Sub-tabs for Financial Statements */
        .sub-tabs {
            display: flex;
            background: linear-gradient(to right, #0d3a5d, #1a4f72);
            overflow-x: auto;
            margin: -25px -25px 16px -25px;
            border-radius: var(--card-radius) var(--card-radius) 0 0;
        }
        
        .sub-tab {
            padding: 10px 16px;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.85rem;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .sub-tab.active {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            position: relative;
        }
        
        .sub-tab.active:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: white;
        }
        
        .sub-tab-content {
            display: none;
            padding: 0;
        }
        
        .sub-tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .reval-highlight {
            background-color: rgba(255, 215, 0, 0.2);
            transition: background-color 1s ease;
            border-left: 3px solid gold;
        }
        
        .revaluation-effect {
            animation: revalPulse 2s ease;
        }
        
        @keyframes revalPulse {
            0% { background-color: rgba(255, 215, 0, 0.5); }
            100% { background-color: transparent; }
        }
        
        .account-type-indicator {
            display: inline-block;
            padding: 3px 6px;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 6px;
        }
        
        .asset-type { background-color: #d1ecf1; color: #0c5460; }
        .liability-type { background-color: #d4edda; color: #155724; }
        .equity-type { background-color: #fff3cd; color: #856404; }
        .revenue-type { background-color: #cce5ff; color: #004085; }
        .expense-type { background-color: #f8d7da; color: #721c24; }
        
        /* Account summary cards */
        .account-summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .account-card {
            background: white;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            padding: 16px;
            display: flex;
            flex-direction: column;
        }
        
        .account-card-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .account-name {
            font-weight: 600;
            color: var(--primary);
            font-size: 0.95rem;
        }
        
        .account-type {
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 8px;
            background: #e9ecef;
        }
        
        .account-balance {
            font-size: 1.3rem;
            font-weight: 700;
            margin: auto;
        }
        
        .account-card-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 0.85rem;
        }
        
        .reval-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--text-light);
        }
        
        .reval-true {
            color: var(--success);
        }
        
        .profit-positive {
            color: #28a745;
            font-weight: bold;
        }
        
        .profit-negative {
            color: #dc3545;
            font-weight: bold;
        }
        
        .statement-section {
            margin-bottom: 12px;
        }
        
        .cash-flow-activity {
            margin-bottom: 16px;
            background: #f8f9fa;
            border-radius: 6px;
            padding: 12px;
        }
        
        .cash-flow-activity h4 {
            color: var(--primary);
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        
        .reval-info {
            background: #e8f4fc;
            border-radius: 6px;
            padding: 12px;
            margin-top: 12px;
            font-size: 0.85rem;
            border-left: 4px solid var(--primary-light);
        }
        
        .revaluation-impact {
            background: #fff8e6;
            border-radius: 6px;
            padding: 12px;
            margin: 12px 0;
            border-left: 4px solid #ffc107;
        }
        
        /* Asset Management Section */
        .asset-form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        @media (min-width: 768px) {
            .asset-form-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .asset-form-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border);
        }
        
        .asset-form-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }
        
        /* Mobile specific styles */
        @media (max-width: 768px) {
            .logo-text h1 {
                font-size: 1.5rem;
            }
            
            .accounting-equation {
                font-size: 1.1rem;
                padding: 10px;
            }
            
            .card {
                padding: 15px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .btn {
                padding: 8px 12px;
                font-size: 0.85rem;
            }
            
            .financial-statement-title {
                font-size: 1.3rem;
            }
            
            .action-buttons .btn {
                min-width: 100%;
            }
            
            .table-container {
                max-height: 350px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .logo-text h1 {
                font-size: 1.3rem;
            }
            
            .card-header h2 {
                font-size: 1.2rem;
            }
            
            .account-summary-cards {
                grid-template-columns: 1fr;
            }
            
            .tab {
                padding: 10px 15px;
                font-size: 0.85rem;
            }
            
            .sub-tab {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
            
            .form-control {
                padding: 10px;
            }
        }
        
        /* New revaluation styles */
        .reval-panel {
            background-color: #fff8e6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #ffc107;
        }
        
        .reval-panel h3 {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .reval-difference {
            font-weight: bold;
            padding: 8px;
            border-radius: 4px;
            text-align: center;
            margin-top: 10px;
        }
        
        .reval-gain {
            background-color: #d4edda;
            color: #155724;
        }
        
        .reval-loss {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        /* Account creation panel */
        .account-creation {
            background-color: #e8f4fc;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid var(--primary-light);
        }
        
        .account-creation h3 {
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .account-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .account-type-btn {
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .account-type-btn:hover {
            transform: translateY(-3px);
        }
        
        .asset-btn { background-color: #d1ecf1; color: #0c5460; }
        .liability-btn { background-color: #d4edda; color: #155724; }
        .equity-btn { background-color: #fff3cd; color: #856404; }
        .revenue-btn { background-color: #cce5ff; color: #004085; }
        .expense-btn { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <div class="logo-text">
                    <h1>Biradar ACCA Accounting</h1>
                    <p>Professional Financial Management System</p>
                </div>
            </div>
            <div class="accounting-equation">
                Assets = Liabilities + <span>Equity</span>
            </div>
        </header>
        
        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-plus-circle"></i> Create Journal Entry</h2>
                </div>
                
                <form id="journalForm">
                    <div class="form-group">
                        <label for="entryDate"><i class="fas fa-calendar-alt"></i> Date</label>
                        <input type="date" id="entryDate" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="description"><i class="fas fa-file-alt"></i> Description</label>
                        <input type="text" id="description" class="form-control" placeholder="Enter transaction description" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="debitAccount"><i class="fas fa-arrow-left"></i> Debit Account</label>
                        <select id="debitAccount" class="form-control" required>
                            <option value="">Select Account</option>
                            <!-- Accounts will be populated dynamically -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="debitAmount"><i class="fas fa-pound-sign"></i> Debit Amount (£)</label>
                        <input type="number" id="debitAmount" class="form-control" placeholder="Enter amount" min="0.01" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="creditAccount"><i class="fas fa-arrow-right"></i> Credit Account</label>
                        <select id="creditAccount" class="form-control" required>
                            <option value="">Select Account</option>
                            <!-- Accounts will be populated dynamically -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="creditAmount"><i class="fas fa-pound-sign"></i> Credit Amount (£)</label>
                        <input type="number" id="creditAmount" class="form-control" placeholder="Enter amount" min="0.01" step="0.01" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Record Entry
                    </button>
                </form>
                
                <div class="account-creation">
                    <h3><i class="fas fa-plus-square"></i> Create New Account</h3>
                    <div class="account-types">
                        <div class="account-type-btn asset-btn" data-type="Asset">
                            <i class="fas fa-building"></i> Asset
                        </div>
                        <div class="account-type-btn liability-btn" data-type="Liability">
                            <i class="fas fa-file-invoice-dollar"></i> Liability
                        </div>
                        <div class="account-type-btn equity-btn" data-type="Equity">
                            <i class="fas fa-hand-holding-usd"></i> Equity
                        </div>
                        <div class="account-type-btn revenue-btn" data-type="Revenue">
                            <i class="fas fa-chart-line"></i> Revenue
                        </div>
                        <div class="account-type-btn expense-btn" data-type="Expense">
                            <i class="fas fa-money-bill-wave"></i> Expense
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-history"></i> Recent Journal Entries</h2>
                    <button class="btn btn-outline" id="clearJournal">
                        <i class="fas fa-trash"></i> Clear All
                    </button>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th><i class="fas fa-calendar"></i> Date</th>
                                <th><i class="fas fa-align-left"></i> Description</th>
                                <th><i class="fas fa-arrow-left"></i> Debit Account</th>
                                <th><i class="fas fa-arrow-right"></i> Credit Account</th>
                                <th><i class="fas fa-pound-sign"></i> Debit (£)</th>
                                <th><i class="fas fa-pound-sign"></i> Credit (£)</th>
                            </tr>
                        </thead>
                        <tbody id="journalEntries">
                            <!-- Journal entries will be populated dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="account-summary-cards" id="accountSummary">
            <!-- Account summary cards will be populated dynamically -->
        </div>
        
        <div class="tab-container">
            <div class="tabs">
                <div class="tab active" data-tab="ledger"><i class="fas fa-book"></i> General Ledger</div>
                <div class="tab" data-tab="trial"><i class="fas fa-balance-scale"></i> Trial Balance</div>
                <div class="tab" data-tab="financial"><i class="fas fa-file-invoice-dollar"></i> Financial Statements</div>
                <div class="tab" data-tab="revaluation"><i class="fas fa-sync-alt"></i> Revaluation</div>
            </div>
            
            <!-- General Ledger Tab -->
            <div class="tab-content active" id="ledger-tab">
                <div class="card" style="border: none; padding: 0; box-shadow: none;">
                    <div class="card-header">
                        <h2><i class="fas fa-book"></i> General Ledger</h2>
                        <div class="form-group" style="margin-bottom: 0; min-width: 200px;">
                            <select class="form-control" id="ledgerAccountFilter">
                                <option value="all">All Accounts</option>
                                <!-- Accounts will be populated dynamically -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="ledgerTable">
                            <thead>
                                <tr>
                                    <th><i class="fas fa-calendar"></i> Date</th>
                                    <th><i class="fas fa-book"></i> Account</th>
                                    <th><i class="fas fa-align-left"></i> Description</th>
                                    <th><i class="fas fa-arrow-left"></i> Debit (£)</th>
                                    <th><i class="fas fa-arrow-right"></i> Credit (£)</th>
                                    <th><i class="fas fa-pound-sign"></i> Balance (£)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Ledger content will be populated dynamically -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-info" id="printLedger">
                            <i class="fas fa-print"></i> Print
                        </button>
                        <button class="btn btn-success" id="pdfLedger">
                            <i class="fas fa-file-pdf"></i> Export PDF
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Trial Balance Tab -->
            <div class="tab-content" id="trial-tab">
                <div class="card" style="border: none; padding: 0; box-shadow: none;">
                    <div class="card-header">
                        <h2><i class="fas fa-balance-scale"></i> Trial Balance</h2>
                        <button class="btn btn-success" id="calculateTrialBalance">
                            <i class="fas fa-calculator"></i> Calculate
                        </button>
                    </div>
                    
                    <div class="trial-balance" id="trialBalanceContent">
                        <h3 id="trialBalanceDate">As of June 30, 2025</h3>
                        
                        <div class="table-container">
                            <table id="trialBalanceTable">
                                <thead>
                                    <tr>
                                        <th><i class="fas fa-book"></i> Account</th>
                                        <th><i class="fas fa-arrow-left"></i> Debit (£)</th>
                                        <th><i class="fas fa-arrow-right"></i> Credit (£)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Trial balance content will be populated dynamically -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="total">
                            <span>Total</span>
                            <span id="trialTotal">£0.00 | £0.00</span>
                        </div>
                        
                        <div class="balanced" id="balanceStatus">
                            <i class="fas fa-check-circle"></i> Trial Balance is Balanced
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-info" id="printTrialBalance">
                            <i class="fas fa-print"></i> Print
                        </button>
                        <button class="btn btn-success" id="pdfTrialBalance">
                            <i class="fas fa-file-pdf"></i> Export PDF
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Financial Statements Tab -->
            <div class="tab-content" id="financial-tab">
                <div class="card" style="border: none; padding: 0; box-shadow: none;">
                    <div class="card-header">
                        <h2><i class="fas fa-file-invoice-dollar"></i> Financial Statements</h2>
                        <button class="btn btn-success" id="generateFinancials">
                            <i class="fas fa-file-invoice-dollar"></i> Generate
                        </button>
                    </div>
                    
                    <div class="sub-tabs">
                        <div class="sub-tab" data-subtab="trading"><i class="fas fa-cash-register"></i> Trading Account</div>
                        <div class="sub-tab" data-subtab="profit-loss"><i class="fas fa-chart-line"></i> Profit & Loss</div>
                        <div class="sub-tab active" data-subtab="balance"><i class="fas fa-balance-scale"></i> Balance Sheet</div>
                        <div class="sub-tab" data-subtab="cashflow"><i class="fas fa-money-bill-wave"></i> Cash Flow</div>
                    </div>
                    
                    <!-- Trading Account Sub-Tab -->
                    <div class="sub-tab-content" id="trading-subtab">
                        <div class="financial-statement">
                            <h3 class="financial-statement-title">Trading Account</h3>
                            <p class="financial-period">For the Year Ended June 30, 2025</p>
                            
                            <div id="tradingContent">
                                <!-- Trading content will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Profit & Loss Sub-Tab -->
                    <div class="sub-tab-content" id="profit-loss-subtab">
                        <div class="financial-statement">
                            <h3 class="financial-statement-title">Profit & Loss Statement</h3>
                            <p class="financial-period">For the Year Ended June 30, 2025</p>
                            
                            <div id="profitLossContent">
                                <!-- Profit & Loss content will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Balance Sheet Sub-Tab -->
                    <div class="sub-tab-content active" id="balance-subtab">
                        <div class="financial-statement">
                            <h3 class="financial-statement-title">Balance Sheet</h3>
                            <p class="financial-period">As of June 30, 2025</p>
                            
                            <div class="financial-grid">
                                <div class="financial-section" id="assets-section">
                                    <h4><i class="fas fa-building"></i> Assets</h4>
                                    <!-- Assets will be populated dynamically -->
                                </div>
                                
                                <div class="financial-section" id="liabilities-section">
                                    <h4><i class="fas fa-file-invoice-dollar"></i> Liabilities & Equity</h4>
                                    <!-- Liabilities & Equity will be populated dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Cash Flow Sub-Tab -->
                    <div class="sub-tab-content" id="cashflow-subtab">
                        <div class="financial-statement">
                            <h3 class="financial-statement-title">Statement of Cash Flows</h3>
                            <p class="financial-period">For the Year Ended June 30, 2025</p>
                            
                            <div id="cashFlowContent">
                                <!-- Cash flow content will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Revaluation Tab -->
            <div class="tab-content" id="revaluation-tab">
                <div class="card" style="border: none; padding: 0; box-shadow: none;">
                    <div class="card-header">
                        <h2><i class="fas fa-sync-alt"></i> Account Revaluation</h2>
                        <div>
                            <span id="revalCount">0</span> Revaluations Recorded
                        </div>
                    </div>
                    
                    <div class="asset-form-grid">
                        <div class="asset-form-section">
                            <h3><i class="fas fa-sync-alt"></i> Perform Revaluation</h3>
                            <form id="revaluationForm">
                                <div class="form-group">
                                    <label for="revalDate"><i class="fas fa-calendar-alt"></i> Date</label>
                                    <input type="date" id="revalDate" class="form-control" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="account"><i class="fas fa-book"></i> Account</label>
                                    <select id="account" class="form-control" required>
                                        <option value="">Select Account</option>
                                        <!-- Accounts will be populated dynamically -->
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="revalDescription"><i class="fas fa-file-alt"></i> Description</label>
                                    <input type="text" id="revalDescription" class="form-control" placeholder="Enter revaluation description" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="currentValue"><i class="fas fa-pound-sign"></i> Current Value (£)</label>
                                    <input type="number" id="currentValue" class="form-control" placeholder="Current value" min="0.01" step="0.01" required readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="newValue"><i class="fas fa-pound-sign"></i> New Value (£)</label>
                                    <input type="number" id="newValue" class="form-control" placeholder="New value" min="0.01" step="0.01" required>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-sync-alt"></i> Record Revaluation
                                </button>
                            </form>
                            
                            <div class="reval-panel">
                                <h3><i class="fas fa-calculator"></i> Revaluation Impact</h3>
                                <div class="form-group">
                                    <label>Difference:</label>
                                    <div id="revalDifference" class="reval-difference">£0.00</div>
                                </div>
                                
                                <div class="reval-info">
                                    <i class="fas fa-info-circle"></i> 
                                    Revaluation adjustments are recorded through journal entries and affect the balance sheet.
                                </div>
                            </div>
                        </div>
                        
                        <div class="asset-form-section">
                            <h3><i class="fas fa-history"></i> Revaluation History</h3>
                            <div class="table-container">
                                <table id="revalTable">
                                    <thead>
                                        <tr>
                                            <th><i class="fas fa-calendar"></i> Date</th>
                                            <th><i class="fas fa-book"></i> Account</th>
                                            <th><i class="fas fa-align-left"></i> Description</th>
                                            <th><i class="fas fa-pound-sign"></i> Original (£)</th>
                                            <th><i class="fas fa-pound-sign"></i> New (£)</th>
                                            <th><i class="fas fa-exchange-alt"></i> Difference (£)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Revaluation history will be populated dynamically -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-outline" id="clearRevaluation">
                                    <i class="fas fa-trash"></i> Clear History
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <div class="footer-content">
                <p>Biradar ACCA Accounting System</p>
                <p class="copyright">Professional Financial Management Solution Compliant with ACCA Standards</p>
                <p class="copyright">© 2025 Biradar Professional Accounting System. All rights reserved.</p>
            </div>
        </footer>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span>Journal entry saved successfully!</span>
    </div>
    
    <script>
        // Initialize data storage - all data is user created
        let journalEntries = JSON.parse(localStorage.getItem('journalEntries')) || [];
        let revaluationEntries = JSON.parse(localStorage.getItem('revaluationEntries')) || [];
        let accounts = JSON.parse(localStorage.getItem('accounts')) || {
            // Default accounts with zero balance
            cash: { id: "cash", name: 'Cash', type: 'Asset', balance: 0 },
            accounts_receivable: { id: "accounts_receivable", name: 'Accounts Receivable', type: 'Asset', balance: 0 },
            inventory: { id: "inventory", name: 'Inventory', type: 'Asset', balance: 0 },
            equipment: { id: "equipment", name: 'Equipment', type: 'Asset', balance: 0 },
            accounts_payable: { id: "accounts_payable", name: 'Accounts Payable', type: 'Liability', balance: 0 },
            loan: { id: "loan", name: 'Loan', type: 'Liability', balance: 0 },
            capital: { id: "capital", name: 'Capital', type: 'Equity', balance: 0 },
            sales: { id: "sales", name: 'Sales Revenue', type: 'Revenue', balance: 0 },
            cogs: { id: "cogs", name: 'Cost of Goods Sold', type: 'Expense', balance: 0 },
            salaries: { id: "salaries", name: 'Salaries Expense', type: 'Expense', balance: 0 },
            rent: { id: "rent", name: 'Rent Expense', type: 'Expense', balance: 0 },
            utilities: { id: "utilities", name: 'Utilities Expense', type: 'Expense', balance: 0 },
            revaluation_reserve: { id: "revaluation_reserve", name: 'Revaluation Reserve', type: 'Equity', balance: 0 }
        };
        
        // Tab functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs
                document.querySelectorAll('.tab').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // Hide all tab content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Show corresponding tab content
                const tabId = this.getAttribute('data-tab');
                document.getElementById(`${tabId}-tab`).classList.add('active');
                
                // Recalculate when switching to trial balance
                if (tabId === 'trial') {
                    calculateTrialBalance();
                }
            });
        });
        
        // Sub-tab functionality for Financial Statements
        document.querySelectorAll('.sub-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all sub-tabs
                document.querySelectorAll('.sub-tab').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Add active class to clicked sub-tab
                this.classList.add('active');
                
                // Hide all sub-tab content
                document.querySelectorAll('.sub-tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Show corresponding sub-tab content
                const subtabId = this.getAttribute('data-subtab');
                document.getElementById(`${subtabId}-subtab`).classList.add('active');
                
                // Update financial statements if needed
                if (subtabId === 'balance') {
                    updateBalanceSheet();
                } else if (subtabId === 'trading') {
                    updateTradingAccount();
                } else if (subtabId === 'profit-loss') {
                    updateProfitLoss();
                } else if (subtabId === 'cashflow') {
                    updateCashFlow();
                }
            });
        });
        
        // Account creation buttons
        document.querySelectorAll('.account-type-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const accountType = this.getAttribute('data-type');
                createAccount(accountType);
            });
        });
        
        // Create a new account
        function createAccount(accountType) {
            const accountName = prompt(`Enter name for the new ${accountType} account:`);
            if (!accountName) return;
            
            const accountId = accountName.toLowerCase().replace(/\s+/g, '_');
            
            // Check if account already exists
            if (accounts[accountId]) {
                showNotification('Account with this name already exists!', 'error');
                return;
            }
            
            // Create account
            accounts[accountId] = {
                id: accountId,
                name: accountName,
                type: accountType,
                balance: 0
            };
            
            localStorage.setItem('accounts', JSON.stringify(accounts));
            populateAccountDropdowns();
            updateAccountSummary();
            
            showNotification(`${accountType} account created: ${accountName}`, 'success');
        }
        
        // Populate account dropdowns
        function populateAccountDropdowns() {
            const debitAccountSelect = document.getElementById('debitAccount');
            const creditAccountSelect = document.getElementById('creditAccount');
            const accountFilter = document.getElementById('ledgerAccountFilter');
            const accountSelect = document.getElementById('account');
            
            // Clear existing options
            debitAccountSelect.innerHTML = '<option value="">Select Account</option>';
            creditAccountSelect.innerHTML = '<option value="">Select Account</option>';
            accountFilter.innerHTML = '<option value="all">All Accounts</option>';
            accountSelect.innerHTML = '<option value="">Select Account</option>';
            
            // Group accounts by type
            const accountTypes = {
                'Asset': [],
                'Liability': [],
                'Equity': [],
                'Revenue': [],
                'Expense': []
            };
            
            // Populate accountTypes
            Object.values(accounts).forEach(account => {
                accountTypes[account.type] = accountTypes[account.type] || [];
                accountTypes[account.type].push(account);
            });
            
            // Add to debit and credit selects with grouping
            const addOptions = (select) => {
                for (const [type, accounts] of Object.entries(accountTypes)) {
                    if (accounts.length === 0) continue;
                    
                    const group = document.createElement('optgroup');
                    group.label = type + ' Accounts';
                    
                    accounts.forEach(account => {
                        const option = document.createElement('option');
                        option.value = account.id;
                        option.textContent = account.name;
                        
                        // Add account type indicator
                        const typeSpan = document.createElement('span');
                        typeSpan.className = 'account-type-indicator ' + account.type.toLowerCase() + '-type';
                        typeSpan.textContent = account.type;
                        option.appendChild(typeSpan);
                        
                        group.appendChild(option);
                    });
                    
                    select.appendChild(group);
                }
            };
            
            // Populate all dropdowns
            addOptions(debitAccountSelect);
            addOptions(creditAccountSelect);
            addOptions(accountFilter);
            addOptions(accountSelect);
        }
        
        // Form submission
        document.getElementById('journalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const date = document.getElementById('entryDate').value;
            const description = document.getElementById('description').value;
            const debitAccount = document.getElementById('debitAccount').value;
            const debitAmount = parseFloat(document.getElementById('debitAmount').value);
            const creditAccount = document.getElementById('creditAccount').value;
            const creditAmount = parseFloat(document.getElementById('creditAmount').value);
            
            // Validate amounts
            if (!date || !description || !debitAccount || !debitAmount || !creditAccount || !creditAmount) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            if (debitAmount !== creditAmount) {
                showNotification('Debit and Credit amounts must be equal', 'error');
                return;
            }
            
            // Create journal entry
            const entry = {
                id: Date.now(),
                date: date,
                description: description,
                debitAccount: debitAccount,
                debitAmount: debitAmount,
                creditAccount: creditAccount,
                creditAmount: creditAmount
            };
            
            // Add to journal entries
            journalEntries.push(entry);
            localStorage.setItem('journalEntries', JSON.stringify(journalEntries));
            
            // Update account balances
            accounts[debitAccount].balance += debitAmount;
            accounts[creditAccount].balance += creditAmount;
            
            // Update UI
            updateJournalEntriesTable();
            updateLedgerTable();
            calculateTrialBalance();
            updateBalanceSheet();
            updateAccountSummary();
            updateTradingAccount();
            updateProfitLoss();
            updateCashFlow();
            
            // Show success message
            showNotification('Journal entry saved successfully!', 'success');
            
            // Reset form
            this.reset();
        });
        
        // Revaluation form submission
        document.getElementById('revaluationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const date = document.getElementById('revalDate').value;
            const accountId = document.getElementById('account').value;
            const description = document.getElementById('revalDescription').value;
            const currentValue = parseFloat(document.getElementById('currentValue').value);
            const newValue = parseFloat(document.getElementById('newValue').value);
            
            if (!date || !accountId || !description || !currentValue || !newValue) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            const account = accounts[accountId];
            if (!account) return;
            
            const difference = newValue - currentValue;
            
            const entry = {
                id: Date.now(),
                date: date,
                accountId: accountId,
                accountName: account.name,
                description: description,
                currentValue: currentValue,
                newValue: newValue,
                difference: difference
            };
            
            revaluationEntries.push(entry);
            localStorage.setItem('revaluationEntries', JSON.stringify(revaluationEntries));
            document.getElementById('revalCount').textContent = revaluationEntries.length;
            
            // Create journal entry for revaluation
            if (difference !== 0) {
                let debitAccount, creditAccount;
                let amount = Math.abs(difference);
                
                // Determine accounts based on account type
                if (account.type === 'Asset' || account.type === 'Expense') {
                    if (difference > 0) {
                        debitAccount = accountId;
                        creditAccount = 'revaluation_reserve';
                    } else {
                        debitAccount = 'revaluation_reserve';
                        creditAccount = accountId;
                    }
                } else { // Liability, Equity, Revenue
                    if (difference > 0) {
                        debitAccount = 'revaluation_reserve';
                        creditAccount = accountId;
                    } else {
                        debitAccount = accountId;
                        creditAccount = 'revaluation_reserve';
                    }
                }
                
                const journalEntry = {
                    id: Date.now() + 1,
                    date: date,
                    description: `Revaluation of ${account.name}`,
                    debitAccount: debitAccount,
                    debitAmount: amount,
                    creditAccount: creditAccount,
                    creditAmount: amount
                };
                
                journalEntries.push(journalEntry);
                localStorage.setItem('journalEntries', JSON.stringify(journalEntries));
                
                // Update account balances
                accounts[debitAccount].balance += amount;
                accounts[creditAccount].balance += amount;
                
                // Update all views
                updateJournalEntriesTable();
                updateLedgerTable();
                calculateTrialBalance();
                updateBalanceSheet();
                updateAccountSummary();
                updateTradingAccount();
                updateProfitLoss();
                updateCashFlow();
                updateRevaluationTable();
            }
            
            showNotification('Revaluation recorded successfully!', 'success');
            this.reset();
            document.getElementById('revalDifference').textContent = '£0.00';
            document.getElementById('revalDifference').className = 'reval-difference';
        });
        
        // Clear journal entries
        document.getElementById('clearJournal').addEventListener('click', function() {
            if (confirm('Are you sure you want to clear all journal entries?')) {
                journalEntries = [];
                localStorage.removeItem('journalEntries');
                updateJournalEntriesTable();
                document.getElementById('ledgerTable').querySelector('tbody').innerHTML = '';
                document.getElementById('trialBalanceTable').querySelector('tbody').innerHTML = '';
                updateAccountSummary();
                updateTradingAccount();
                updateProfitLoss();
                updateCashFlow();
                showNotification('All journal entries cleared', 'success');
            }
        });
        
        // Clear revaluation entries
        document.getElementById('clearRevaluation').addEventListener('click', function() {
            if (confirm('Are you sure you want to clear all revaluation history?')) {
                revaluationEntries = [];
                localStorage.removeItem('revaluationEntries');
                updateRevaluationTable();
                document.getElementById('revalCount').textContent = '0';
                showNotification('Revaluation history cleared', 'success');
            }
        });
        
        // Calculate trial balance
        document.getElementById('calculateTrialBalance').addEventListener('click', function() {
            calculateTrialBalance();
            showNotification('Trial balance calculated', 'success');
        });
        
        // Generate financial statements
        document.getElementById('generateFinancials').addEventListener('click', function() {
            updateBalanceSheet();
            updateTradingAccount();
            updateProfitLoss();
            updateCashFlow();
            showNotification('Financial statements updated', 'success');
        });
        
        // Ledger account filter
        document.getElementById('ledgerAccountFilter').addEventListener('change', function() {
            updateLedgerTable();
        });
        
        // Print and PDF functionality
        document.getElementById('printLedger').addEventListener('click', function() {
            printElement('ledgerTable', 'General Ledger Report');
        });
        
        document.getElementById('pdfLedger').addEventListener('click', function() {
            exportToPDF('ledgerTable', 'General Ledger Report');
        });
        
        document.getElementById('printTrialBalance').addEventListener('click', function() {
            printElement('trialBalanceContent', 'Trial Balance Report');
        });
        
        document.getElementById('pdfTrialBalance').addEventListener('click', function() {
            exportToPDF('trialBalanceContent', 'Trial Balance Report');
        });
        
        // Account selection in revaluation form
        document.getElementById('account').addEventListener('change', function() {
            const accountId = this.value;
            if (accountId) {
                const account = accounts[accountId];
                if (account) {
                    document.getElementById('currentValue').value = account.balance.toFixed(2);
                    
                    // Update revaluation difference
                    const newValue = parseFloat(document.getElementById('newValue').value) || 0;
                    const difference = newValue - account.balance;
                    document.getElementById('revalDifference').textContent = `£${difference.toFixed(2)}`;
                    document.getElementById('revalDifference').className = 
                        difference >= 0 ? 'reval-difference reval-gain' : 'reval-difference reval-loss';
                }
            } else {
                document.getElementById('currentValue').value = '';
                document.getElementById('revalDifference').textContent = '£0.00';
                document.getElementById('revalDifference').className = 'reval-difference';
            }
        });
        
        // Update revaluation difference when new value changes
        document.getElementById('newValue').addEventListener('input', function() {
            const currentValue = parseFloat(document.getElementById('currentValue').value) || 0;
            const newValue = parseFloat(this.value) || 0;
            const difference = newValue - currentValue;
            
            document.getElementById('revalDifference').textContent = `£${difference.toFixed(2)}`;
            document.getElementById('revalDifference').className = 
                difference >= 0 ? 'reval-difference reval-gain' : 'reval-difference reval-loss';
        });
        
        // Show notification
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.querySelector('span').textContent = message;
            notification.className = `notification ${type}`;
            
            setTimeout(() => {
                notification.style.transform = 'translateX(200%)';
                setTimeout(() => {
                    notification.className = 'notification';
                    notification.style.transform = 'translateX(0)';
                }, 300);
            }, 3000);
        }
        
        // Print element
        function printElement(elementId, title) {
            const element = document.getElementById(elementId);
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>${title}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 15px; }
                        h1 { color: #1a4f72; text-align: center; margin-bottom: 15px; font-size: 1.5rem; }
                        table { width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 0.9rem; }
                        th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
                        th { background-color: #f1f5f9; color: #1a4f72; }
                        .total { font-weight: bold; }
                        .debit-amount { color: #2c8c99; }
                        .credit-amount { color: #e74c3c; }
                        .print-date { text-align: right; font-size: 0.8em; margin-bottom: 15px; }
                    </style>
                </head>
                <body>
                    <h1>Biradar ACCA Accounting System</h1>
                    <h2>${title}</h2>
                    <div class="print-date">Printed: ${new Date().toLocaleString()}</div>
            `);
            printWindow.document.write(element.innerHTML);
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.print();
        }
        
        // Export to PDF
        function exportToPDF(elementId, title) {
            const element = document.getElementById(elementId);
            const opt = {
                margin: 10,
                filename: `${title.replace(/\s+/g, '_')}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            
            html2pdf().set(opt).from(element).save();
        }
        
        // Update account summary cards
        function updateAccountSummary() {
            const accountSummary = document.getElementById('accountSummary');
            accountSummary.innerHTML = '';
            
            // Calculate account balances
            Object.values(accounts).forEach(account => {
                const card = document.createElement('div');
                card.className = 'account-card';
                
                card.innerHTML = `
                    <div class="account-card-header">
                        <div class="account-name">${account.name}</div>
                        <div class="account-type">${account.type}</div>
                    </div>
                    <div class="account-balance">£${account.balance.toFixed(2)}</div>
                    <div class="account-card-footer">
                        <div>ID: ${account.id}</div>
                        <div class="reval-indicator reval-true">
                            <i class="fas fa-sync-alt"></i>
                            Revaluable
                        </div>
                    </div>
                `;
                
                accountSummary.appendChild(card);
            });
        }
        
        // Update journal entries table
        function updateJournalEntriesTable() {
            const tableBody = document.getElementById('journalEntries');
            
            if (journalEntries.length === 0) {
                tableBody.innerHTML = `
                    <tr class="empty-state-row">
                        <td colspan="6" class="empty-state">
                            <i class="fas fa-file-alt"></i>
                            <h3>No Journal Entries</h3>
                            <p>Add your first journal entry</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Remove empty state row if present
            const emptyRow = tableBody.querySelector('.empty-state-row');
            if (emptyRow) emptyRow.remove();
            
            // Sort entries by date (newest first)
            const sortedEntries = [...journalEntries].sort((a, b) => 
                new Date(b.date) - new Date(a.date));
            
            // Add entries to table
            tableBody.innerHTML = '';
            sortedEntries.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.date}</td>
                    <td>${entry.description}</td>
                    <td>${accounts[entry.debitAccount]?.name || entry.debitAccount}</td>
                    <td>${accounts[entry.creditAccount]?.name || entry.creditAccount}</td>
                    <td class="debit-amount">${entry.debitAmount.toFixed(2)}</td>
                    <td class="credit-amount">${entry.creditAmount.toFixed(2)}</td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        // Update ledger table
        function updateLedgerTable() {
            const tableBody = document.getElementById('ledgerTable').querySelector('tbody');
            const selectedAccount = document.getElementById('ledgerAccountFilter').value;
            
            // Create ledger entries
            let ledgerEntries = [];
            journalEntries.forEach(entry => {
                // Debit entry
                ledgerEntries.push({
                    date: entry.date,
                    account: entry.debitAccount,
                    description: entry.description,
                    debit: entry.debitAmount,
                    credit: 0
                });
                
                // Credit entry
                ledgerEntries.push({
                    date: entry.date,
                    account: entry.creditAccount,
                    description: entry.description,
                    debit: 0,
                    credit: entry.creditAmount
                });
            });
            
            // Sort ledger entries by date
            const sortedEntries = [...ledgerEntries].sort((a, b) => 
                new Date(a.date) - new Date(b.date));
            
            // Filter entries if an account is selected
            const filteredEntries = selectedAccount === 'all' 
                ? sortedEntries 
                : sortedEntries.filter(entry => entry.account === selectedAccount);
            
            if (filteredEntries.length === 0) {
                tableBody.innerHTML = `
                    <tr class="empty-state-row">
                        <td colspan="6" class="empty-state">
                            <i class="fas fa-book"></i>
                            <h3>No Entries for Selected Account</h3>
                            <p>No journal entries for this account</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Add entries to table
            tableBody.innerHTML = '';
            
            // Running balances for each account
            const accountBalances = {};
            Object.keys(accounts).forEach(account => {
                accountBalances[account] = 0;
            });
            
            filteredEntries.forEach(entry => {
                // Update account balance
                const account = accounts[entry.account];
                if (!account) return;
                
                // Calculate balance based on account type
                if (account.type === 'Asset' || account.type === 'Expense') {
                    accountBalances[entry.account] += entry.debit - entry.credit;
                } else {
                    accountBalances[entry.account] += entry.credit - entry.debit;
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.date}</td>
                    <td>${account.name}</td>
                    <td>${entry.description}</td>
                    <td class="${entry.debit > 0 ? 'debit-amount' : ''}">${entry.debit > 0 ? entry.debit.toFixed(2) : ''}</td>
                    <td class="${entry.credit > 0 ? 'credit-amount' : ''}">${entry.credit > 0 ? entry.credit.toFixed(2) : ''}</td>
                    <td>${accountBalances[entry.account].toFixed(2)}</td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        // Update revaluation table
        function updateRevaluationTable() {
            const tableBody = document.getElementById('revalTable').querySelector('tbody');
            document.getElementById('revalCount').textContent = revaluationEntries.length;
            
            if (revaluationEntries.length === 0) {
                tableBody.innerHTML = `
                    <tr class="empty-state-row">
                        <td colspan="6" class="empty-state">
                            <i class="fas fa-balance-scale"></i>
                            <h3>No Revaluation Entries</h3>
                            <p>Record account revaluations</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Remove empty state row if present
            const emptyRow = tableBody.querySelector('.empty-state-row');
            if (emptyRow) emptyRow.remove();
            
            // Sort entries by date (newest first)
            const sortedEntries = [...revaluationEntries].sort((a, b) => 
                new Date(b.date) - new Date(a.date));
            
            // Add entries to table
            tableBody.innerHTML = '';
            sortedEntries.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.date}</td>
                    <td>${entry.accountName}</td>
                    <td>${entry.description}</td>
                    <td>${entry.currentValue.toFixed(2)}</td>
                    <td>${entry.newValue.toFixed(2)}</td>
                    <td class="${entry.difference >= 0 ? 'reval-gain' : 'reval-loss'}">${entry.difference.toFixed(2)}</td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        // Calculate trial balance
        function calculateTrialBalance() {
            const tableBody = document.getElementById('trialBalanceTable').querySelector('tbody');
            const trialBalanceDate = document.getElementById('trialBalanceDate');
            const trialTotal = document.getElementById('trialTotal');
            const balanceStatus = document.getElementById('balanceStatus');
            
            // Prepare trial balance data
            let totalDebit = 0;
            let totalCredit = 0;
            const trialData = [];
            
            Object.values(accounts).forEach(account => {
                if (account.balance > 0) {
                    if (account.type === 'Asset' || account.type === 'Expense') {
                        totalDebit += account.balance;
                        trialData.push({
                            account: account.name,
                            debit: account.balance,
                            credit: 0
                        });
                    } else {
                        totalCredit += account.balance;
                        trialData.push({
                            account: account.name,
                            debit: 0,
                            credit: account.balance
                        });
                    }
                }
            });
            
            // Sort by account name
            trialData.sort((a, b) => a.account.localeCompare(b.account));
            
            if (trialData.length === 0) {
                tableBody.innerHTML = `
                    <tr class="empty-state-row">
                        <td colspan="3" class="empty-state">
                            <i class="fas fa-balance-scale"></i>
                            <h3>No Trial Balance Data</h3>
                            <p>Add journal entries to generate</p>
                        </td>
                    </tr>
                `;
                trialBalanceDate.textContent = "As of ";
                trialTotal.textContent = "£0.00 | £0.00";
                balanceStatus.innerHTML = '<i class="fas fa-check-circle"></i> Trial Balance is Balanced';
                return;
            }
            
            // Add entries to table
            tableBody.innerHTML = '';
            trialData.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.account}</td>
                    <td class="${item.debit > 0 ? 'debit-amount' : ''}">${item.debit > 0 ? item.debit.toFixed(2) : ''}</td>
                    <td class="${item.credit > 0 ? 'credit-amount' : ''}">${item.credit > 0 ? item.credit.toFixed(2) : ''}</td>
                `;
                tableBody.appendChild(row);
            });
            
            // Add totals row
            const totalRow = document.createElement('tr');
            totalRow.style.fontWeight = 'bold';
            totalRow.innerHTML = `
                <td>Total</td>
                <td class="debit-amount">${totalDebit.toFixed(2)}</td>
                <td class="credit-amount">${totalCredit.toFixed(2)}</td>
            `;
            tableBody.appendChild(totalRow);
            
            // Update trial balance info
            const lastEntryDate = journalEntries.reduce((latest, entry) => 
                new Date(entry.date) > new Date(latest) ? entry.date : latest, 
                journalEntries[0]?.date || new Date().toISOString().split('T')[0]
            );
            
            trialBalanceDate.textContent = `As of ${lastEntryDate}`;
            trialTotal.textContent = `£${totalDebit.toFixed(2)} | £${totalCredit.toFixed(2)}`;
            
            if (Math.abs(totalDebit - totalCredit) < 0.01) {
                balanceStatus.innerHTML = '<i class="fas fa-check-circle"></i> Trial Balance is Balanced';
                balanceStatus.className = 'balanced';
            } else {
                balanceStatus.innerHTML = '<i class="fas fa-exclamation-circle"></i> Trial Balance is NOT Balanced';
                balanceStatus.className = 'not-balanced';
            }
        }
        
        // Update balance sheet
        function updateBalanceSheet() {
            const assetsSection = document.getElementById('assets-section');
            const liabilitiesSection = document.getElementById('liabilities-section');
            
            // Calculate total assets
            const assets = Object.values(accounts).filter(a => a.type === 'Asset');
            const totalAssets = assets.reduce((sum, account) => sum + account.balance, 0);
            
            // Calculate total liabilities
            const liabilities = Object.values(accounts).filter(a => a.type === 'Liability');
            const totalLiabilities = liabilities.reduce((sum, account) => sum + account.balance, 0);
            
            // Calculate total equity
            const equity = Object.values(accounts).filter(a => a.type === 'Equity');
            const totalEquity = equity.reduce((sum, account) => sum + account.balance, 0);
            
            // Update assets section
            assetsSection.innerHTML = `
                <h4><i class="fas fa-building"></i> Assets</h4>
                ${assets.length > 0 ? assets.map(account => `
                    <div class="account-item">
                        <div>${account.name}</div>
                        <div>£${account.balance.toFixed(2)}</div>
                    </div>
                `).join('') : '<p class="empty-state">No asset accounts</p>'}
                <div class="account-item total">
                    <div>Total Assets</div>
                    <div>£${totalAssets.toFixed(2)}</div>
                </div>
            `;
            
            // Update liabilities & equity section
            liabilitiesSection.innerHTML = `
                <h4><i class="fas fa-file-invoice-dollar"></i> Liabilities & Equity</h4>
                <h5>Liabilities</h5>
                ${liabilities.length > 0 ? liabilities.map(account => `
                    <div class="account-item">
                        <div>${account.name}</div>
                        <div>£${account.balance.toFixed(2)}</div>
                    </div>
                `).join('') : '<p>No liability accounts</p>'}
                <div class="account-item subtotal">
                    <div>Total Liabilities</div>
                    <div>£${totalLiabilities.toFixed(2)}</div>
                </div>
                
                <h5>Equity</h5>
                ${equity.length > 0 ? equity.map(account => `
                    <div class="account-item">
                        <div>${account.name}</div>
                        <div>£${account.balance.toFixed(2)}</div>
                    </div>
                `).join('') : '<p>No equity accounts</p>'}
                <div class="account-item subtotal">
                    <div>Total Equity</div>
                    <div>£${totalEquity.toFixed(2)}</div>
                </div>
                
                <div class="account-item total">
                    <div>Total Liabilities & Equity</div>
                    <div>£${(totalLiabilities + totalEquity).toFixed(2)}</div>
                </div>
            `;
        }
        
        // Update Trading Account
        function updateTradingAccount() {
            const tradingContent = document.getElementById('tradingContent');
            
            // Get sales revenue
            const salesAccounts = Object.values(accounts).filter(a => a.name.toLowerCase().includes('sales'));
            const sales = salesAccounts.reduce((sum, account) => sum + account.balance, 0);
            
            // Get cost of goods sold
            const cogsAccounts = Object.values(accounts).filter(a => 
                a.name.toLowerCase().includes('cost') || 
                a.name.toLowerCase().includes('cogs'));
            const cogs = cogsAccounts.reduce((sum, account) => sum + account.balance, 0);
            
            // Calculate gross profit
            const grossProfit = sales - cogs;
            
            tradingContent.innerHTML = `
                <div class="statement-section">
                    <div class="account-row">
                        <div>Sales Revenue</div>
                        <div>£${sales.toFixed(2)}</div>
                    </div>
                    <div class="account-row">
                        <div>Less: Cost of Goods Sold</div>
                        <div>(£${cogs.toFixed(2)})</div>
                    </div>
                    <div class="account-row statement-total">
                        <div>Gross Profit</div>
                        <div class="${grossProfit >= 0 ? 'value-positive' : 'value-negative'}">£${grossProfit.toFixed(2)}</div>
                    </div>
                </div>
            `;
        }
        
        // Update Profit and Loss Statement
        function updateProfitLoss() {
            const profitLossContent = document.getElementById('profitLossContent');
            
            // Get gross profit from trading account
            const salesAccounts = Object.values(accounts).filter(a => a.name.toLowerCase().includes('sales'));
            const sales = salesAccounts.reduce((sum, account) => sum + account.balance, 0);
            
            const cogsAccounts = Object.values(accounts).filter(a => 
                a.name.toLowerCase().includes('cost') || 
                a.name.toLowerCase().includes('cogs'));
            const cogs = cogsAccounts.reduce((sum, account) => sum + account.balance, 0);
            
            const grossProfit = sales - cogs;
            
            // Get operating expenses
            const opExpensesAccounts = Object.values(accounts).filter(a => 
                a.type === 'Expense' && 
                !a.name.toLowerCase().includes('cost') && 
                !a.name.toLowerCase().includes('cogs'));
                
            const opExpenses = opExpensesAccounts.reduce((sum, account) => sum + account.balance, 0);
            
            // Calculate net profit
            const netProfit = grossProfit - opExpenses;
            
            profitLossContent.innerHTML = `
                <div class="statement-section">
                    <div class="account-row">
                        <div>Gross Profit</div>
                        <div>£${grossProfit.toFixed(2)}</div>
                    </div>
                    <div class="account-row">
                        <div>Less: Operating Expenses</div>
                        <div>(£${opExpenses.toFixed(2)})</div>
                    </div>
                    <div class="account-row statement-total">
                        <div>Net Profit</div>
                        <div class="${netProfit >= 0 ? 'value-positive' : 'value-negative'}">£${netProfit.toFixed(2)}</div>
                    </div>
                </div>
            `;
        }
        
        // Update Cash Flow Statement
        function updateCashFlow() {
            const cashFlowContent = document.getElementById('cashFlowContent');
            
            // Get cash account
            const cashAccounts = Object.values(accounts).filter(a => 
                a.name.toLowerCase().includes('cash') || 
                a.name.toLowerCase().includes('bank'));
            const cashBalance = cashAccounts.reduce((sum, account) => sum + account.balance, 0);
            
            // Get cash flow from operations
            const operationsCash = cashAccounts.reduce((sum, account) => {
                const operationsEntries = journalEntries.filter(entry => 
                    (entry.debitAccount === account.id || entry.creditAccount === account.id) &&
                    (entry.description.toLowerCase().includes('sale') || 
                     entry.description.toLowerCase().includes('expense')));
                
                return operationsEntries.reduce((acc, entry) => {
                    if (entry.debitAccount === account.id) {
                        return acc + entry.debitAmount;
                    } else {
                        return acc - entry.creditAmount;
                    }
                }, 0);
            }, 0);
            
            // Get cash flow from investing
            const investingCash = cashAccounts.reduce((sum, account) => {
                const investingEntries = journalEntries.filter(entry => 
                    (entry.debitAccount === account.id || entry.creditAccount === account.id) &&
                    (entry.description.toLowerCase().includes('equipment') || 
                     entry.description.toLowerCase().includes('property')));
                
                return investingEntries.reduce((acc, entry) => {
                    if (entry.debitAccount === account.id) {
                        return acc + entry.debitAmount;
                    } else {
                        return acc - entry.creditAmount;
                    }
                }, 0);
            }, 0);
            
            // Get cash flow from financing
            const financingCash = cashAccounts.reduce((sum, account) => {
                const financingEntries = journalEntries.filter(entry => 
                    (entry.debitAccount === account.id || entry.creditAccount === account.id) &&
                    (entry.description.toLowerCase().includes('loan') || 
                     entry.description.toLowerCase().includes('capital')));
                
                return financingEntries.reduce((acc, entry) => {
                    if (entry.debitAccount === account.id) {
                        return acc + entry.debitAmount;
                    } else {
                        return acc - entry.creditAmount;
                    }
                }, 0);
            }, 0);
            
            // Calculate net cash flow
            const netCashFlow = operationsCash + investingCash + financingCash;
            
            cashFlowContent.innerHTML = `
                <div class="cash-flow-activity">
                    <h4>Cash Flow from Operating Activities</h4>
                    <div class="cash-flow-item">
                        <div>Net cash provided by operations</div>
                        <div class="${operationsCash >= 0 ? 'value-positive' : 'value-negative'}">£${operationsCash.toFixed(2)}</div>
                    </div>
                </div>
                
                <div class="cash-flow-activity">
                    <h4>Cash Flow from Investing Activities</h4>
                    <div class="cash-flow-item">
                        <div>Net cash used in investing</div>
                        <div class="${investingCash >= 0 ? 'value-positive' : 'value-negative'}">£${investingCash.toFixed(2)}</div>
                    </div>
                </div>
                
                <div class="cash-flow-activity">
                    <h4>Cash Flow from Financing Activities</h4>
                    <div class="cash-flow-item">
                        <div>Net cash provided by financing</div>
                        <div class="${financingCash >= 0 ? 'value-positive' : 'value-negative'}">£${financingCash.toFixed(2)}</div>
                    </div>
                </div>
                
                <div class="cash-flow-total">
                    <div>Net Increase (Decrease) in Cash</div>
                    <div class="${netCashFlow >= 0 ? 'value-positive' : 'value-negative'}">£${netCashFlow.toFixed(2)}</div>
                </div>
                
                <div class="cash-flow-total">
                    <div>Cash at Beginning of Period</div>
                    <div>£0.00</div>
                </div>
                
                <div class="cash-flow-total">
                    <div>Cash at End of Period</div>
                    <div>£${cashBalance.toFixed(2)}</div>
                </div>
            `;
        }
        
        // Initialize the application
        function initApp() {
            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('entryDate').value = today;
            document.getElementById('revalDate').value = today;
            
            // Populate account dropdowns
            populateAccountDropdowns();
            
            // Update UI with existing data
            updateJournalEntriesTable();
            updateLedgerTable();
            calculateTrialBalance();
            updateBalanceSheet();
            updateAccountSummary();
            updateTradingAccount();
            updateProfitLoss();
            updateCashFlow();
            updateRevaluationTable();
            
            // Set initial reval count
            document.getElementById('revalCount').textContent = revaluationEntries.length;
        }
        
        // Start the application
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
    <style>
/* Add this new CSS rule at the end of your existing styles */
#revalTable {
    min-width: 800px; /* Ensures table has minimum width */
    width: 100%; /* Fills container width */
}

/* Modify the existing .table-container specifically for revaluation */
#revaluation-tab .table-container {
    overflow-x: auto; /* Horizontal scrolling */
    max-height: 450px;
    margin: 0 -10px;
    padding: 0 10px;
    border-radius: 6px;
}
</style>
</body>
</html>
